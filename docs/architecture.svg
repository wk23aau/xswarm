<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600">
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" font-size="24" font-weight="bold" fill="#333">
    xswarm Architecture
  </text>
  
  <!-- Script Box -->
  <rect x="320" y="60" width="160" height="60" fill="#4A90E2" stroke="#2E5C8A" stroke-width="2" rx="5"/>
  <text x="400" y="85" text-anchor="middle" font-size="14" font-weight="bold" fill="white">xswarm2.py</text>
  <text x="400" y="105" text-anchor="middle" font-size="12" fill="white">Orchestrator</text>
  
  <!-- Arrow down -->
  <line x1="400" y1="120" x2="400" y2="160" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Directive Box -->
  <rect x="50" y="160" width="200" height="80" fill="#F39C12" stroke="#D68910" stroke-width="2" rx="5"/>
  <text x="150" y="185" text-anchor="middle" font-size="14" font-weight="bold" fill="white">Directive</text>
  <text x="150" y="205" text-anchor="middle" font-size="11" fill="white">analyze_snapshot.md</text>
  <text x="150" y="225" text-anchor="middle" font-size="12" font-weight="bold" fill="#FFF9E6">DIR_ID: DIR001</text>
  
  <!-- MSG Box -->
  <rect x="300" y="160" width="200" height="80" fill="#9B59B6" stroke="#7D3C98" stroke-width="2" rx="5"/>
  <text x="400" y="185" text-anchor="middle" font-size="14" font-weight="bold" fill="white">Message</text>
  <text x="400" y="205" text-anchor="middle" font-size="11" fill="white">[DIR001] Execute...</text>
  <text x="400" y="225" text-anchor="middle" font-size="12" font-weight="bold" fill="#F4ECF7">MSG_ID: MSG3AE127</text>
  
  <!-- Agent Windows -->
  <g>
    <!-- AGENT001 -->
    <rect x="50" y="280" width="320" height="120" fill="#27AE60" stroke="#1E8449" stroke-width="2" rx="5"/>
    <text x="210" y="305" text-anchor="middle" font-size="16" font-weight="bold" fill="white">AGENT001</text>
    <text x="210" y="325" text-anchor="middle" font-size="12" fill="white">Window Handle: 1574992</text>
    
    <!-- Response file -->
    <rect x="70" y="340" width="280" height="50" fill="#ECF7ED" stroke="#1E8449" stroke-width="1" rx="3"/>
    <text x="210" y="360" text-anchor="middle" font-size="11" fill="#1E8449" font-family="monospace">.agent/AGENT001/responses.txt</text>
    <text x="210" y="378" text-anchor="middle" font-size="10" fill="#1E8449" font-family="monospace">[DIR001][MSG3AE127] ... [MSG3AE127]</text>
  </g>
  
  <g>
    <!-- AGENT002 -->
    <rect x="430" y="280" width="320" height="120" fill="#E74C3C" stroke="#C0392B" stroke-width="2" rx="5"/>
    <text x="590" y="305" text-anchor="middle" font-size="16" font-weight="bold" fill="white">AGENT002</text>
    <text x="590" y="325" text-anchor="middle" font-size="12" fill="white">Window Handle: 2033752</text>
    
    <!-- Response file -->
    <rect x="450" y="340" width="280" height="50" fill="#FADBD8" stroke="#C0392B" stroke-width="1" rx="3"/>
    <text x="590" y="360" text-anchor="middle" font-size="11" fill="#C0392B" font-family="monospace">.agent/AGENT002/responses.txt</text>
    <text x="590" y="378" text-anchor="middle" font-size="10" fill="#C0392B" font-family="monospace">[DIR002][MSG9B4F3A] ... [MSG9B4F3A]</text>
  </g>
  
  <!-- Arrows from message to agents -->
  <line x1="350" y1="240" x2="210" y2="280" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="450" y1="240" x2="590" y2="280" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- ID Legend -->
  <rect x="50" y="450" width="700" height="130" fill="#F8F9FA" stroke="#CCC" stroke-width="2" rx="5"/>
  <text x="400" y="475" text-anchor="middle" font-size="16" font-weight="bold" fill="#333">ID Tracking System</text>
  
  <g font-size="12">
    <circle cx="80" cy="500" r="5" fill="#F39C12"/>
    <text x="95" y="505" fill="#333"><tspan font-weight="bold">DIR_ID:</tspan> Directive identifier (e.g., DIR001, DIRA3F29C)</text>
    
    <circle cx="80" cy="530" r="5" fill="#9B59B6"/>
    <text x="95" y="535" fill="#333"><tspan font-weight="bold">MSG_ID:</tspan> Message identifier (e.g., MSG3AE127)</text>
    
    <circle cx="80" cy="560" r="5" fill="#27AE60"/>
    <text x="95" y="565" fill="#333"><tspan font-weight="bold">AGENT_ID:</tspan> Agent identifier (e.g., AGENT001, AGENT002)</text>
  </g>
  
  <!-- Flow indicator -->
  <text x="550" y="500" text-anchor="start" font-size="11" fill="#666" font-style="italic">
    <tspan x="420" dy="0">Response format:</tspan>
    <tspan x="420" dy="20" font-family="monospace">[DIR_ID][MSG_ID]</tspan>
    <tspan x="420" dy="15" font-family="monospace">...content...</tspan>
    <tspan x="420" dy="15" font-family="monospace">[MSG_ID]</tspan>
  </text>
  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#666"/>
    </marker>
  </defs>
</svg>
